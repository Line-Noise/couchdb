Apache CouchDB DEVELOPERS
=========================

Only follow these instructions if you are building from a source checkout.

If you're unsure what this means, ignore this document.

Dependencies
------------

You will need the following installed:

 * GNU Libtool            (http://www.gnu.org/software/libtool/)
 * GNU Automake (>=1.6.3) (http://www.gnu.org/software/automake/)
 * GNU Autoconf (>=2.68)  (http://www.gnu.org/software/autoconf/)
 * GNU Autoconf Archive   (http://www.gnu.org/software/autoconf-archive/)
 * pkg-config             (http://www.freedesktop.org/wiki/Software/pkg-config)
 * Sphinx                 (http://sphinx.pocoo.org/)
 * LaTex                  (http://www.latex-project.org/)
 * GNU Texinfo            (http://www.gnu.org/software/texinfo/)
 * GNU help2man           (http://www.gnu.org/software/help2man/)

# @@ instructions for LaTex
# @@ http://www.latex-project.org/ftp.html
# @@ need help to flesh out instructions for Windows

# @@ deps for docs

The `help2man` tool is optional, but will generate `man` pages for you.

# @@ add more notes like this one

Debian-based (inc. Ubuntu) Systems
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

You can install the dependencies by running:

    sudo apt-get install libtool
    sudo apt-get install automake
    sudo apt-get install autoconf
    sudo apt-get install autoconf-archive
    sudo apt-get install pkg-config
    sudo apt-get install python-sphinx 
    sudo apt-get install texlive-latex-base
    sudo apt-get install texlive-latex-recommended
    sudo apt-get install texlive-latex-extra
    sudo apt-get install texlive-fonts-recommended
    sudo apt-get install texinfo
    sudo apt-get install help2man

Be sure to update the version numbers to match your system's available packages.

Mac OS X
~~~~~~~~

You can install the dependencies by running:

    brew install libtool
    brew install automake
    brew install autoconf 
    brew install autoconf-archive
    brew install pkg-config
    @@ sphinx
    brew install help2man

# @@ instructions for LaTex

# @@ check these packages are correct

# @@ check other files don't use MacPorts

You will need Homebrew installed to use the `brew` command.

Bootstrapping
-------------

Bootstrap the pristine source by running:

    ./bootstrap

You must repeat this step every time you update your source checkout.

Configuring
-----------

Configure the source by running:

    ./configure --enable-strictness

This will cause `configure' to fail when optional dependancies are missing.
Certain parts of the build are shipped along with the release, and so the tools
needed to rebuild them are not required. When you are building from source,
these tools are required or you will have missing files.

You will need these files anyway, because the build will error out.

# @@ if you dont have them it tells you to check the README file, so we need to
# @@ put a note in there pointing to this file or something

# @@ check `syntax' with Github, etc

If you're working on the build system itself, you can run:

    ./configure --disable-tests

This skips the tests allowing quicker `make' cycles.

Testing
-------

Check the test suite by running:

    make check

Generate a coverage report by running:

    make cover

Please report any problems to the developer's mailing list.

Releasing
---------

The release procedure is documented in the project wiki:

    https://wiki.apache.org/couchdb/Release_procedure

Unix-like Systems
~~~~~~~~~~~~~~~~~

Prepare the release artefacts by running:

    make distcheck

You can prepare signed release artefacts by running:

    make distsign

The release artefacts can be found in the root source directory.

Microsoft Windows
~~~~~~~~~~~~~~~~~

Prepare the release artefacts by running:

    make dist

The release artefacts can be found in the `etc/windows` directory.

Until the build system has been improved, you must make sure that you run this
command from a clean source checkout. If you do not, your test database and log
files will be bundled up in the release artefact.
